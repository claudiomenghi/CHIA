<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="it"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>IBA.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">CHIAAutomata</a> &gt; <a href="index.source.html" class="el_package">it.polimi.automata</a> &gt; <span class="el_source">IBA.java</span></div><h1>IBA.java</h1><pre class="source lang-java linenums">package it.polimi.automata;

import it.polimi.automata.state.State;
import it.polimi.automata.transition.Transition;
import it.polimi.automata.transition.TransitionFactory;

import java.util.Collections;
import java.util.HashSet;
import java.util.Set;

import javax.validation.constraints.NotNull;

import rwth.i2.ltl2ba4j.model.IGraphProposition;

import com.google.common.base.Preconditions;

/**
 * &lt;p&gt;
 * The \texttt{IBA} class contains the class which describes an Incomplete Buchi
 * Automaton. The \texttt{IBA} class extends \texttt{BA} by storing the set of
 * the \emph{black box} states. &lt;br&gt;
 * 
 * @author claudiomenghi
 */
public class IBA extends BA {

	/**
	 * contains the set of the black box states of the automaton
	 */
	private @NotNull Set&lt;State&gt; blackBoxesStates;

	/**
	 * creates a new incomplete Buchi automaton
	 * 
	 * @param transitionFactory
	 *            the factory to be used in the creation of the transitions
	 */
	public IBA(@NotNull TransitionFactory&lt;State, Transition&gt; transitionFactory) {
<span class="fc" id="L39">		super(transitionFactory);</span>
<span class="fc" id="L40">		this.blackBoxesStates = new HashSet&lt;State&gt;();</span>
<span class="fc" id="L41">	}</span>

	/**
	 * check if the state is a black box of the automaton
	 * 
	 * @param s
	 *            is the state to be checked if it is a black box of the
	 *            automaton
	 * @return true if the state s is a black box of the automaton, false
	 *         otherwise
	 * @throws NullPointerException
	 *             if the state s is null
	 * @throws IllegalArgumentException
	 *             if the state is not contained into the set of the states of
	 *             the automaton
	 */
	public boolean isBlackBox(@NotNull State s) {
<span class="fc" id="L58">		Preconditions.checkNotNull(s, &quot;The state to be added cannot be null&quot;);</span>
		Preconditions
<span class="fc" id="L60">				.checkArgument(this.getStates().contains(s),</span>
<span class="fc" id="L61">						&quot;The state is not contained into the set of the states of the IBA&quot;);</span>

<span class="fc" id="L63">		return this.blackBoxesStates.contains(s);</span>
	}

	/**
	 * returns the set of the black box states of the Incomplete Buchi Automaton
	 * 
	 * @return the set of the black box states of the Incomplete Buchi Automaton
	 *         (if no black box states are present an empty set is returned)
	 */
	public @NotNull Set&lt;State&gt; getBlackBoxStates() {
<span class="fc" id="L73">		return Collections.unmodifiableSet(this.blackBoxesStates);</span>
	}

	/**
	 * returns the set of the regular states of the Incomplete Buchi Automaton
	 * 
	 * @return the set of the regular states of the Incomplete Buchi Automaton
	 */
	public Set&lt;State&gt; getRegularStates() {
<span class="fc" id="L82">		Set&lt;State&gt; states = new HashSet&lt;State&gt;();</span>
<span class="fc" id="L83">		states.addAll(this.getStates());</span>
<span class="fc" id="L84">		states.removeAll(this.getBlackBoxStates());</span>
<span class="fc" id="L85">		return states;</span>
	}

	/**
	 * adds the black box state s to the states of the {@link IBA} and to the
	 * set of the black box state&lt;br&gt;
	 * if the state is already a black box no action is performed &lt;br&gt;
	 * if the state is a state of the BA but is not a black box, it is also
	 * added to the set of the black box states
	 * 
	 * @param s
	 *            the state to be added in the black box states of the
	 *            {@link IBA}
	 * @throws NullPointerException
	 *             if the state s is null
	 */
	public void addBlackBoxState(State s) {
<span class="fc" id="L102">		Preconditions.checkNotNull(s, &quot;The state to be added cannot be null&quot;);</span>

<span class="fc" id="L104">		this.blackBoxesStates.add(s);</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">		if (!this.getStates().contains(s)) {</span>
<span class="fc" id="L106">			this.addState(s);</span>
		}
<span class="fc" id="L108">	}</span>

	/**
	 * creates a copy of the Incomplete Buchi Automaton
	 * 
	 * @return a copy of the Incomplete Buchi Automaton
	 */
	@Override
	public IBA clone() {
<span class="fc" id="L117">		IBA clone = new IBA(</span>
<span class="fc" id="L118">				(TransitionFactory&lt;State, Transition&gt;) this.automataGraph</span>
<span class="fc" id="L119">						.getEdgeFactory());</span>
<span class="fc bfc" id="L120" title="All 2 branches covered.">		for (IGraphProposition l : this.getPropositions()) {</span>
<span class="fc" id="L121">			clone.addProposition(l);</span>
		}
<span class="fc bfc" id="L123" title="All 2 branches covered.">		for (State s : this.getStates()) {</span>
<span class="fc" id="L124">			clone.addState(s);</span>
		}
<span class="fc bfc" id="L126" title="All 2 branches covered.">		for (State s : this.getAcceptStates()) {</span>
<span class="fc" id="L127">			clone.addAcceptState(s);</span>
		}
<span class="fc bfc" id="L129" title="All 2 branches covered.">		for (State s : this.getInitialStates()) {</span>
<span class="fc" id="L130">			clone.addInitialState(s);</span>
		}
<span class="fc bfc" id="L132" title="All 2 branches covered.">		for (State s : this.getBlackBoxStates()) {</span>
<span class="fc" id="L133">			clone.addBlackBoxState(s);</span>
		}
<span class="fc bfc" id="L135" title="All 2 branches covered.">		for (Transition t : this.getTransitions()) {</span>
<span class="fc" id="L136">			clone.addTransition(this.getTransitionSource(t),</span>
<span class="fc" id="L137">					this.getTransitionDestination(t), t);</span>
		}

<span class="fc" id="L140">		return clone;</span>
	}

	/**
	 * {@inheritDoc} removes the state from the IBA. If the state is also
	 * contained in the set of black box state it is removed from this set
	 * 
	 * @param state
	 *            the state to be removed from the IBA
	 * @throws NullPointerException
	 *             if the state to be removed is null
	 */
	public void removeState(State state) {
<span class="fc" id="L153">		super.removeState(state);</span>
<span class="fc bfc" id="L154" title="All 2 branches covered.">		if (this.blackBoxesStates.contains(state)) {</span>
<span class="fc" id="L155">			this.blackBoxesStates.remove(state);</span>
		}
<span class="fc" id="L157">	}</span>

	/**
	 * {@inheritDoc}
	 */
	@Override
	public String toString() {
<span class="fc" id="L164">		String ret = &quot;&quot;;</span>

<span class="fc" id="L166">		ret = &quot;ALPHABET: &quot; + this.getPropositions() + &quot;\n&quot;;</span>
<span class="fc" id="L167">		ret = ret + &quot;STATES: &quot; + this.automataGraph.vertexSet() + &quot;\n&quot;;</span>
<span class="fc" id="L168">		ret = ret + &quot;INITIAL STATES: &quot; + this.getInitialStates() + &quot;\n&quot;;</span>
<span class="fc" id="L169">		ret = ret + &quot;ACCEPTING STATES: &quot; + this.getAcceptStates() + &quot;\n&quot;;</span>
<span class="fc" id="L170">		ret = ret + &quot;BLACK BOX STATES: &quot; + this.getBlackBoxStates() + &quot;\n&quot;;</span>
<span class="fc" id="L171">		ret = ret + &quot;TRANSITIONS\n&quot;;</span>
<span class="fc bfc" id="L172" title="All 2 branches covered.">		for (State s : this.automataGraph.vertexSet()) {</span>
<span class="fc" id="L173">			ret = ret + &quot;state &quot; + s + &quot; -&gt;\n&quot;;</span>
<span class="fc bfc" id="L174" title="All 2 branches covered.">			for (Transition outEdge : this.automataGraph.outgoingEdgesOf(s)) {</span>
<span class="fc" id="L175">				ret = ret + &quot;\t \t&quot; + outEdge + &quot;\t&quot;</span>
<span class="fc" id="L176">						+ this.getTransitionDestination(outEdge);</span>
			}
<span class="fc" id="L178">			ret = ret + &quot;\n&quot;;</span>

		}
<span class="fc" id="L181">		return ret;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span></div></body></html>