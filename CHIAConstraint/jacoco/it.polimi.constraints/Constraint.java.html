<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="it"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Constraint.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">CHIAConstraint</a> &gt; <a href="index.source.html" class="el_package">it.polimi.constraints</a> &gt; <span class="el_source">Constraint.java</span></div><h1>Constraint.java</h1><pre class="source lang-java linenums">package it.polimi.constraints;

import java.util.Collections;
import java.util.HashSet;
import java.util.Set;

import it.polimi.automata.state.State;
import it.polimi.constraints.components.SubProperty;

import com.google.common.base.Preconditions;
import com.google.common.collect.BiMap;
import com.google.common.collect.HashBiMap;

/**
 * The Constraint class describes the constraint associated with the
 * satisfaction of a claim on a model. The constraint contains the set of
 * sub-properties associated with the black box states of the model, a map
 * that contains for each sub-property how they are connected with the original
 * model (i.e., the in-coming and out-coming) transitions of the sub-property,
 * the color of this ports and a graph that describes how the sub-property are
 * related, i.e., how the ports of the sub-properties are connected.
 * 
 * @author Claudio Menghi
 *
 */
public class Constraint {

	/**
	 * is the set sub-property to be considered in the refinement of the
	 * black box state
	 */
	private final Set&lt;SubProperty&gt; subProperties;

	/**
	 * is a map that specifies for each black box state the corresponding
	 * sub-property and viceversa
	 */
	private final BiMap&lt;State, SubProperty&gt; stateSubPropertyMap;

	/**
	 * creates a new empty constraint
	 * 
	 */
<span class="fc" id="L44">	public Constraint() {</span>
<span class="fc" id="L45">		this.subProperties = new HashSet&lt;SubProperty&gt;();</span>
<span class="fc" id="L46">		this.stateSubPropertyMap = HashBiMap.create();</span>
<span class="fc" id="L47">	}</span>

	/**
	 * returns the sub-property associated with the constraint
	 * 
	 * @return the sub-property associated with the constraint
	 */
	public Set&lt;SubProperty&gt; getSubProperties() {
<span class="fc" id="L55">		return Collections.unmodifiableSet(subProperties);</span>
	}

	/**
	 * returns the sub-property associated with the specified state
	 * 
	 * @param state
	 *            the state of the model to which the sub-property is associated
	 * @return the sub-property associated with the specified state of the model
	 * @throws NullPointerException
	 *             if the state is null
	 * @throws IllegalArgumentException
	 *             if the state is not associated with any sub-property
	 */
	public SubProperty getSubProperty(State state) {
<span class="fc" id="L70">		Preconditions.checkNotNull(state,</span>
				&quot;The state to be considered cannot be null&quot;);
<span class="fc" id="L72">		Preconditions.checkArgument(</span>
<span class="fc" id="L73">				this.stateSubPropertyMap.containsKey(state),</span>
				&quot;No sub-property associated with the state: &quot; + state);
<span class="fc" id="L75">		return this.stateSubPropertyMap.get(state);</span>
	}

	/**
	 * adds the sub-property to the set of the sub-properties of the constraint
	 * 
	 * @param subProperty
	 *            the sub-property to be added to the set of sub-properties
	 * @throws NullPointerException
	 *             if the sub-property is null
	 * @throws IllegalArgumentException
	 *             if the sub-property constraints an already constrained state
	 */
	public void addSubProperty(SubProperty subProperty) {
<span class="fc" id="L89">		Preconditions.checkNotNull(subProperty,</span>
				&quot;The sub-Property to be considered cannot be null&quot;);
<span class="fc" id="L91">		Preconditions.checkArgument(!this.stateSubPropertyMap</span>
<span class="fc bfc" id="L92" title="All 2 branches covered.">				.containsKey(subProperty.getModelState()),</span>
				&quot;A sub-property is already associated with the black box state&quot;
<span class="fc" id="L94">						+ subProperty.getModelState());</span>
<span class="fc" id="L95">		this.subProperties.add(subProperty);</span>
<span class="fc" id="L96">		this.stateSubPropertyMap.put(subProperty.getModelState(), subProperty);</span>
<span class="fc" id="L97">	}</span>

	/**
	 * returns the set of the states of the model constrained by the constraint
	 * 
	 * @return the set of the states of the model constrained by the constraint
	 */
	public Set&lt;State&gt; getConstrainedStates() {
<span class="fc" id="L105">		return this.stateSubPropertyMap.keySet();</span>
	}

	/* (non-Javadoc)
	 * @see java.lang.Object#toString()
	 */
	@Override
	public String toString() {
<span class="nc" id="L113">		return &quot;Constraint [subProperties=&quot; + subProperties+ &quot;]&quot;;</span>
	}
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span></div></body></html>